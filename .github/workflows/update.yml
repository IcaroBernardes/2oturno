name: Build and Deploy
on: 
  workflow_dispatch:
jobs:
  build-and-deploy:
    concurrency: ci-${{ github.ref }} # Recommended if you intend to make multiple deployments in quick succession
    runs-on: macOS-latest
    env:
      R_REMOTES_NO_ERRORS_FROM_WARNINGS: true
      GITHUB_PAT: ${{ secrets.PAT_GITHUB }}
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3
      
      - name: Setup R
        uses: r-lib/actions/setup-r@v2
                
      - name: Setup Pandoc
        uses: r-lib/actions/setup-pandoc@v2
        
      - name: Install R packages
        run: |   
          install.packages(c("dplyr","gifski","ggplot2","gganimate","ggpath","ggtext","glue","jsonlite","lubridate","magick","purrr","rmarkdown","ragg","stringr","tidyr"))
        shell: Rscript {0}
      
      - name: Run scrap and render script
        run: |   
          source("colher_de_pau.R")
        shell: Rscript {0}
