name: Build and Deploy
on: 
  workflow_dispatch:
permissions:
  contents: write
jobs:
  build-and-deploy:
    concurrency: ci-${{ github.ref }} # Recommended if you intend to make multiple deployments in quick succession
    runs-on: ubuntu-latest
    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v3
      
      - name: Setup R
        uses: r-lib/actions/setup-r@v2
                
      - name: Setup Pandoc
        uses: r-lib/actions/setup-pandoc@v2
        
      - name: Install R packages
        run: |   
          install.packages(c("remotes","pacman","curl","dplyr","ggplot2","gganimate","ggpath","ggtext","glue","gridtext","htmltools","jsonlite","lubridate","magick","purrr","rmarkdown","ragg","stringr","textshaping","tidyr"))
        shell: Rscript {0}
      
      - name: Run scrap and render script
        run: |   
          source("colher_de_pau.R")
        shell: Rscript {0}

      - name: Deploy 🚀
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          folder: .
